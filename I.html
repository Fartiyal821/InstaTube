<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>InstaTube ‚Äî Admin Panel</title>
<meta name="description" content="InstaTube ‚Äî Admin can upload, users can only view.">

<!-- Favicon Icon -->
<link rel="icon" type="image/svg+xml" 
 href="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJyZWQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI1NiAyNTYiPjxjaXJjbGUgY3g9IjEyOCIgY3k9IjEyOCIgcj0iMTE4IiBmaWxsPSIjZjAwIi8+PHBhdGggZD0iTTEwMCA4MHY5Nmw3Mi00OC05Mi00OCIvPjwvc3ZnPg==" />

<style>
body { font-family: Arial, sans-serif; background:#0a0a0a; color:#eee; margin:0; }
header { background:#111; border-bottom:1px solid #333; padding:10px; display:flex; align-items:center; gap:10px; position:sticky; top:0; }
header h1 { font-weight:bold; font-size:20px; }
header h1 span { color:#f00; }
.layout { display:grid; grid-template-columns:240px 1fr; gap:20px; padding:20px; }
aside { background:#111; padding:10px; border-radius:10px; }
aside button { display:block; width:100%; margin:6px 0; padding:10px; border-radius:8px; background:#222; color:#fff; border:none; cursor:pointer; }
aside button:hover { background:#333; }
section { display:none; }
section.active { display:block; }
.card { background:#111; border:1px solid #333; border-radius:10px; padding:12px; margin-bottom:16px; }
input, textarea { width:100%; padding:8px; margin:6px 0; border-radius:8px; border:1px solid #444; background:#0a0a0a; color:#fff; }
button.action { padding:8px 12px; margin-top:6px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }
.red { background:#e00; color:#fff; }
.red:hover { background:#c00; }
.green { background:#059669; color:#fff; }
.green:hover { background:#047857; }
.dark { background:#222; color:#fff; }
.dark:hover { background:#333; }
.comment-box { margin-top:10px; }
.comment { background:#1c1c1c; padding:6px; border-radius:6px; margin:4px 0; font-size:0.9rem; }
.superchat { background:#ffcc00; color:#000; padding:8px; border-radius:8px; margin:4px 0; font-weight:bold; }
</style>
</head>
<body>

<header>
  <h1>Insta<span>Tube</span> ‚Äî Admin</h1>
</header>

<div class="layout">
  <!-- Sidebar -->
  <aside>
    <button onclick="switchTab('home')">üè† Home</button>
    <button onclick="switchTab('upload')">‚¨ÜÔ∏è Upload</button>
    <button onclick="switchTab('polls')">üìä Polls</button>
    <button onclick="switchTab('live')">üî¥ Live</button>
  </aside>

  <!-- Main Content -->
  <main>
    <!-- Home -->
    <section id="home" class="active">
      <h2>Home</h2>
      <div id="videoFeed"></div>
    </section>

    <!-- Upload (Admin Only) -->
    <section id="upload">
      <h2>Upload Video</h2>
      <input type="file" id="fileInput" accept="video/*,image/*,audio/*">
      <input type="text" id="titleInput" placeholder="Title">
      <textarea id="captionInput" placeholder="Caption"></textarea>
      <button class="action red" onclick="uploadPost()">Publish</button>
    </section>

    <!-- Polls (Admin Only) -->
    <section id="polls">
      <h2>Create Poll</h2>
      <input type="text" id="pollQuestion" placeholder="Poll Question">
      <div id="pollOptions">
        <input type="text" placeholder="Option 1" class="poll-opt">
        <input type="text" placeholder="Option 2" class="poll-opt">
      </div>
      <button class="action dark" onclick="addPollOption()">+ Add Option</button>
      <button class="action green" onclick="createPoll()">Create Poll</button>
      <div id="pollList"></div>
    </section>

    <!-- Live -->
    <section id="live">
      <h2>Go Live</h2>
      <div class="card">
        <p><b>Stream Key:</b> <span id="streamKey"></span></p>
        <button class="action red" onclick="generateStreamKey()">Generate Stream Key</button>
        <p style="margin-top:10px;font-size:0.9rem;opacity:0.8;">
          Use this key in OBS Studio (Settings > Stream > Service: Custom, paste RTMP URL and key).
          Example RTMP URL: <code>rtmp://yourserver/live</code>
        </p>
      </div>
      <div class="card">
        <h3>Live Chat</h3>
        <div id="liveComments"></div>
        <input type="text" id="liveCommentInput" placeholder="Add a comment...">
        <button class="action dark" onclick="addLiveComment()">Send</button>
      </div>
      <div class="card">
        <h3>Super Chat üí∞</h3>
        <input type="text" id="scName" placeholder="Your Name">
        <input type="text" id="scMsg" placeholder="Message">
        <input type="number" id="scAmount" placeholder="Amount (‚Çπ)">
        <button class="action green" onclick="addSuperChat()">Send Super Chat</button>
        <div id="superChatFeed"></div>
      </div>
    </section>
  </main>
</div>

<script>
// Storage
let posts = JSON.parse(localStorage.getItem('posts') || '[]');
let polls = JSON.parse(localStorage.getItem('polls') || '[]');

// Switch tabs
function switchTab(tab){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  if(tab==='home') renderPosts();
  if(tab==='polls') renderPolls();
}

// Upload (Admin)
function uploadPost(){
  let title = document.getElementById('titleInput').value;
  let caption = document.getElementById('captionInput').value;
  let file = document.getElementById('fileInput').files[0];
  if(!title || !file) return alert("Need file & title");
  let url = URL.createObjectURL(file);
  posts.unshift({title, caption, url, comments:[], superchats:[]});
  localStorage.setItem('posts', JSON.stringify(posts));
  renderPosts();
  alert("Published!");
}

// Render Posts (Visible to All)
function renderPosts(){
  let feed = document.getElementById('videoFeed');
  feed.innerHTML="";
  posts.forEach((p,i)=>{
    let card = document.createElement('div');
    card.className="card";
    card.innerHTML=`
      <h3>${p.title}</h3>
      <video src="${p.url}" controls style="width:100%;border-radius:8px;"></video>
      <p>${p.caption}</p>
      <div class="comment-box">
        <h4>Comments</h4>
        <div id="comments-${i}">${p.comments.map(c=>`<div class="comment">${c}</div>`).join('')}</div>
        <input type="text" id="cinput-${i}" placeholder="Add a comment">
        <button class="action dark" onclick="addComment(${i})">Send</button>
      </div>
      <div class="comment-box">
        <h4>Super Chats</h4>
        <div id="sc-${i}">${p.superchats.map(s=>`<div class="superchat">‚Çπ${s.amount} - ${s.name}: ${s.msg}</div>`).join('')}</div>
        <input type="text" id="scname-${i}" placeholder="Name">
        <input type="text" id="scmsg-${i}" placeholder="Message">
        <input type="number" id="scamt-${i}" placeholder="Amount (‚Çπ)">
        <button class="action green" onclick="addPostSuperChat(${i})">Super Chat</button>
      </div>
    `;
    feed.appendChild(card);
  });
}
function addComment(i){
  let val = document.getElementById(`cinput-${i}`).value;
  if(val.trim()=="") return;
  posts[i].comments.push(val);
  localStorage.setItem('posts', JSON.stringify(posts));
  renderPosts();
}
function addPostSuperChat(i){
  let name=document.getElementById(`scname-${i}`).value;
  let msg=document.getElementById(`scmsg-${i}`).value;
  let amt=document.getElementById(`scamt-${i}`).value;
  if(!name||!msg||!amt) return alert("Fill all SuperChat fields");
  posts[i].superchats.push({name,msg,amount:amt});
  localStorage.setItem('posts', JSON.stringify(posts));
  renderPosts();
}

// Polls (Admin)
function addPollOption(){
  let inp=document.createElement('input');
  inp.placeholder="Option";
  inp.className="poll-opt";
  document.getElementById('pollOptions').appendChild(inp);
}
function createPoll(){
  let q=document.getElementById('pollQuestion').value;
  let opts=[...document.querySelectorAll('.poll-opt')].map(i=>i.value).filter(Boolean);
  if(!q||opts.length<2) return alert("Need question and 2+ options");
  polls.unshift({q,opts,votes:Array(opts.length).fill(0)});
  localStorage.setItem('polls', JSON.stringify(polls));
  renderPolls();
}
function renderPolls(){
  let list=document.getElementById('pollList');
  list.innerHTML="";
  polls.forEach((p,i)=>{
    let div=document.createElement('div');
    div.className="card";
    div.innerHTML=`<h4>${p.q}</h4>`+p.opts.map((o,idx)=>`<button class="action dark" onclick="vote(${i},${idx})">${o} (${p.votes[idx]})</button>`).join("<br>");
    list.appendChild(div);
  });
}
function vote(i,idx){
  polls[i].votes[idx]++;
  localStorage.setItem('polls', JSON.stringify(polls));
  renderPolls();
}

// Live
function generateStreamKey(){
  let key="LIVE-"+Math.random().toString(36).substring(2,10).toUpperCase();
  document.getElementById("streamKey").textContent=key;
}
function addLiveComment(){
  let val=document.getElementById("liveCommentInput").value;
  if(!val) return;
  let box=document.getElementById("liveComments");
  box.innerHTML+=`<div class="comment">${val}</div>`;
  document.getElementById("liveCommentInput").value="";
}
function addSuperChat(){
  let name=document.getElementById("scName").value;
  let msg=document.getElementById("scMsg").value;
  let amt=document.getElementById("scAmount").value;
  if(!name||!msg||!amt) return alert("Fill all SuperChat fields");
  let box=document.getElementById("superChatFeed");
  box.innerHTML+=`<div class="superchat">‚Çπ${amt} - ${name}: ${msg}</div>`;
}
</script>
</body>
</html>
